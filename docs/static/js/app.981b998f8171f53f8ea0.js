webpackJsonp([1],{160:function(e,t,a){"use strict";var r=a(57),i=a(443),s=a(430),o=a.n(s),n=a(433),l=a.n(n);r.default.use(i.a),t.a=new i.a({routes:[{path:"/",name:"Map",component:o.a},{path:"/riverflow",name:"Riverflow",component:l.a}]})},161:function(e,t,a){a(411);var r=a(29)(a(180),a(435),null,null);e.exports=r.exports},179:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(57),i=a(161),s=a.n(i),o=a(160);r.default.config.productionTip=!1,new r.default({el:"#app",router:o.a,template:"<App/>",components:{App:s.a}})},180:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(57),i=a(409),s=(a.n(i),a(407)),o=a.n(s),n=a(408),l=a.n(n),c=a(431),d=a.n(c);r.default.use(o.a,{locale:l.a}),t.default={name:"app",components:{navbar:d.a}}},181:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(445),i=a.n(r);t.default={name:"conditions",data:function(){return{condition:void 0}},props:{latestCfs:{type:String,required:!0}},watch:{latestCfs:"displayConditions"},methods:{displayConditions:function(){var e=parseInt(this.latestCfs,10);return 0===e?this.condition=i.a.flow0:e>0&&e<50?this.condition=i.a.flow1:e>=50&&e<100?this.condition=i.a.flow2:e>=100&&e<300?this.condition=i.a.flow3:e>=300&&e<600?this.condition=i.a.flow4:e>=600&&e<2e3?this.condition=i.a.flow5:e>=2e3&&(this.condition=i.a.flow6),this.condition}}}},182:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(193),i=a.n(r);t.default={name:"graph",data:function(){return{graphBaseUrl:"//waterdata.usgs.gov/nwisweb/graph?agency_cd=USGS",graphImage:void 0,loadingGraph:!1}},props:{radioDateType:{type:String,required:!0},selected:{type:String,required:!0},startDate:{required:!0},endDate:{type:[String,Date],required:!0},graphType:{type:String,required:!1},period:{type:Number,required:!0,default:7}},watch:{selected:"displayGraph"},methods:{displayGraph:function(){var e,t=this,a=t.startDate,r=t.endDate,s=t.graphBaseUrl+"&parm_cd="+t.graphType+"&site_no="+t.selected;"object"===i()(t.startDate)&&(a=t.startDate.toISOString().split("T")[0]),"object"===i()(t.endDate)&&(r=t.endDate.toISOString().split("T")[0]),"period"===t.radioDateType&&(s=s+"&period="+t.period),"date"===t.radioDateType&&a&&(s=s+"&begin_date="+a+"&end_date="+r),e='<img src="'+s+'"class="graph" alt="USGS Water-data graph">',t.graphImage=void 0,t.loadingGraph=!0;var o=new Image;return o.src=s,o.onload=function(a){t.graphImage=e,t.loadingGraph=!1},e}}}},183:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(190),i=a.n(r);t.default={name:"history",data:function(){return{title:"History",history:[],STORAGE_KEY:"riverflow-history"}},props:{latestCfs:{type:String,required:!0},siteName:{type:String,required:!0},latestTime:{type:String,required:!0},latestDate:{type:String,required:!0}},mounted:function(){this.fetchHistory()},watch:{latestCfs:"addHistory"},methods:{fetchHistory:function(){var e=this;return JSON.parse(window.localStorage.getItem(this.STORAGE_KEY)||"[]").forEach(function(t,a){e.history.push(t)}),this.history},saveHistory:function(e){window.localStorage.setItem(this.STORAGE_KEY,i()(e))},addHistory:function(){this.history.length>=7&&this.history.pop(),this.history.unshift({cfs:this.latestCfs,name:this.siteName,time:this.latestTime,date:this.latestDate}),this.saveHistory(this.history)}}}},184:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"intro",props:{period:{type:Number,required:!0}}}},185:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(421),i=a.n(r);t.default={name:"map",data:function(){return{key:"AIzaSyA1fV5RautETdjZsTMpClgqHKIgMa8WXPI",center:{lat:31.96,lng:-99.9},kmlLayer:"http://waterwatch.usgs.gov/?m=real&w=kml&regions=tx",zoom:6}},mounted:function(){var e=this;e.$once(e.loadGoogleMaps())},watch:{$route:function(e,t){}},methods:{loadGoogleMaps:function(){var e=this;window.google||i()({key:e.key}).then(function(t){e.initMap(t)}).catch(function(e){console.error(e)})},initMap:function(e){var t=this,a=new e.Map(t.$el,{zoom:t.zoom,center:t.center});new e.KmlLayer({url:t.kmlLayer,map:a})}}}},186:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"navbar",data:function(){return{title:"Riverplan",tagline:"Texas Edition"}},computed:{isDev:function(){return 0}}}},187:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(189),i=(a.n(r),a(116)),s=a.n(i),o=a(423),n=a.n(o),l=a(422),c=a.n(l);t.default={name:"photos",props:{siteName:{type:String,required:!1}},data:function(){return{apiKey:"6c6069e831fb567b86c7d9b75c82624f",flickrTags:void 0,flickrUrl:"https://api.flickr.com/services/rest/?&method=flickr.photos.search",loading:!1,disableButton:!1,numberOfImages:10,galleryImages:[]}},watch:{siteName:function(){this.clearGallery(),this.getFlickrImages()}},methods:{buildFlickrTags:function(){return this.flickrTags=this.siteName.replace(/:.*/,"").trim(),this.flickrTags=this.flickrTags.replace(/\s+/g,"+"),this.flickrTags=this.flickrTags.replace(",+","+"),this.flickrTags="kayak,Texas,"+this.flickrTags,this.flickrTags},getFlickrImages:function(){var e=this;this.loading=!0,s.a.get(e.flickrUrl,{params:{api_key:e.apiKey,format:"json",nojsoncallback:1,per_page:e.numberOfImages,sort:"interestingness-asc",tag_mode:"all",tags:e.buildFlickrTags()}}).then(function(t){e.loading=!1,e.buildImages(t.data.photos.photo)}).catch(function(t){console.error(t.message),e.loading=!1,e.error=t.message})},buildImages:function(e){var t,a,r=this,i=document.querySelector(".gallery"),s=document.createDocumentFragment();e.forEach(function(e,i){r.photoURL="//farm"+e.farm+".static.flickr.com/"+e.server+"/"+e.id+"_"+e.secret,r.square=r.photoURL+"_q.jpg",r.photoLarge=r.photoURL+"_b.jpg",r.photoOriginal=r.photoURL+"_o.jpg",r.photoHref="//www.flickr.com/photos/"+e.owner+"/"+e.id,r.galleryImages.push({src:r.photoLarge,title:e.title,w:0,h:0}),t=new Image,t.src=r.square,t.setAttribute("itemprop","thumbnail"),t.title=e.title,t.height=150,t.width=150,t.dataset.index=i,a=document.createElement("a"),a.rel="prefetch",a.href=r.photoLarge,a.onclick=r.initGallery,a.appendChild(t),s.appendChild(a)}),i.appendChild(s),this.disableButton=!0},clearGallery:function(){this.$el.querySelector(".gallery").innerHTML="",this.disableButton=!1,this.galleryImages=[]},initGallery:function(e){e.preventDefault();var t=this,a=document.querySelector(".pswp"),r={index:e.target.dataset.index,showHideOpacity:!0},i=new n.a(a,c.a,t.galleryImages,r);i.listen("gettingData",function(e,t){if(t.w<1||t.h<1){var a=new Image;a.onload=function(){t.w=this.width,t.h=this.height,i.invalidateCurrItems(),i.updateSize(!0)},a.src=t.src}}),i.init(),i.goTo(parseInt(e.target.dataset.index,10))}}}},188:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(116),i=a.n(r),s=a(446),o=a.n(s),n=a(429),l=a.n(n),c=a(426),d=a.n(c),u=a(432),p=a.n(u),v=a(427),h=a.n(v),f=a(428),g=a.n(f);t.default={name:"riverflow",data:function(){return{backgroundColor:void 0,baseMapUrl:"//maps.google.com/?q=",endDate:(new Date).toISOString().split("T")[0],error:void 0,graphType:"00060",latestCfs:"",latestDate:"",latestTime:"",latitude:void 0,loading:!1,loadingEl:document.querySelector(".loading"),longitude:void 0,mapUrl:void 0,options:o.a.data,period:7,radioDateType:"period",selected:"selectRiver",selectedText:"Select a river",showSearchOptions:!1,siteName:"",startDate:void 0,valueBaseUrl:"https://waterservices.usgs.gov/nwis/iv/"}},components:{intro:l.a,conditions:d.a,photos:p.a,graph:h.a,history:g.a},mounted:function(){"RiverflowUrl"===this.$route.name&&this.setSelectedRiver(this.$route.params.river)},watch:{selected:"getUsgsData",loading:"toggleLoading"},methods:{setSelectedRiver:function(e){var t=this;this.options.forEach(function(a,r){t.formatRiverName(a.text)===e&&(t.selected=a.value)})},changeRiver:function(e){var t=this;this.selected=e,this.options.forEach(function(a,r){a.value===e&&(t.selectedText=a.text)}),t.$el.querySelector(".el-input__inner").value=""},toggleSearchOptions:function(){this.showSearchOptions?this.showSearchOptions=!1:this.showSearchOptions=!0},getUsgsData:function(){var e=this;"selectRiver"!==this.selected&&this.selected&&(this.loading=!0,i.a.get(this.valueBaseUrl,{params:{parameterCd:this.graphType,sites:this.selected,format:"json",period:"P1D"}}).then(function(t){e.loading=!1,t.data.value.timeSeries[0]?(e.displayUsgsData(t.data.value.timeSeries[0]),e.error=null):e.error="no river data available"}).catch(function(t){console.error(t.message),e.loading=!1,e.error=t.message}))},displayUsgsData:function(e){var t=e.values,a=t[0].value.reverse()[0],r=new Date(a.dateTime);this.latestCfs=a.value,this.siteName=e.sourceInfo.siteName,this.latitude=e.sourceInfo.geoLocation.geogLocation.latitude,this.longitude=e.sourceInfo.geoLocation.geogLocation.longitude,this.latestDate=r.toDateString(),this.latestTime=r.toLocaleTimeString(),this.mapUrl=this.baseMapUrl+this.latitude+",+"+this.longitude},formatRiverName:function(e){var t=e;return t=t.toLowerCase(),t=t.replace(/ /g,""),t=t.replace(/(\r\n|\n|\r)/gm,""),t=t.replace(/-(\S*)-/g,"")},selectBackground:function(e){this.backgroundColor=e.target.value,document.body.style.backgroundColor=e.target.value;var t=this.backgroundColor.substring(1),a=parseInt(t,16),r=a>>16&255,i=a>>8&255,s=a>>0&255,o=.2126*r+.7152*i+.0722*s;document.body.style.color=o<128?"#fff":"#000"},toggleLoading:function(){var e=!0===this.loading?"flex":"none";this.loadingEl.style.display=e}}}},409:function(e,t){},410:function(e,t){},411:function(e,t){},412:function(e,t){},413:function(e,t){},414:function(e,t){},415:function(e,t){},416:function(e,t){},417:function(e,t){},418:function(e,t){},426:function(e,t,a){a(418);var r=a(29)(a(181),a(442),"data-v-ee2651e4",null);e.exports=r.exports},427:function(e,t,a){a(410);var r=a(29)(a(182),a(434),null,null);e.exports=r.exports},428:function(e,t,a){a(417);var r=a(29)(a(183),a(441),null,null);e.exports=r.exports},429:function(e,t,a){a(416);var r=a(29)(a(184),a(440),"data-v-a9cd4af4",null);e.exports=r.exports},430:function(e,t,a){a(415);var r=a(29)(a(185),a(439),"data-v-8a4acc14",null);e.exports=r.exports},431:function(e,t,a){a(414);var r=a(29)(a(186),a(438),"data-v-631fdf66",null);e.exports=r.exports},432:function(e,t,a){a(413);var r=a(29)(a(187),a(437),"data-v-528bab57",null);e.exports=r.exports},433:function(e,t,a){a(412);var r=a(29)(a(188),a(436),null,null);e.exports=r.exports},434:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"graph-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingGraph,expression:"loadingGraph"}],staticClass:"graph-loading"},[e._v("\n    Loading graph...\n  ")]),e._v(" "),a("div",{staticClass:"graph-image",domProps:{innerHTML:e._s(e.graphImage)}})])},staticRenderFns:[]}},435:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("navbar"),e._v(" "),a("keep-alive",[a("router-view")],1)],1)},staticRenderFns:[]}},436:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"riverflow"},[a("div",{staticClass:"select-river-wrapper"},[a("el-select",{staticClass:"select-river",attrs:{placeholder:e.selectedText},on:{change:e.changeRiver},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.text,disabled:""===e.value}})})),e._v(" "),a("el-collapse",{staticClass:"graph-options"},[a("el-collapse-item",{attrs:{title:"Search options",name:"1"}},[a("div",{staticClass:"graph-controls-menu"},[a("el-radio",{attrs:{id:"radio-dates-period",label:"period"},model:{value:e.radioDateType,callback:function(t){e.radioDateType=t},expression:"radioDateType"}},[e._v("Search by number of days")]),e._v(" "),a("el-input-number",{directives:[{name:"show",rawName:"v-show",value:"period"===e.radioDateType,expression:"radioDateType === 'period'"}],staticClass:"graph-period",attrs:{type:"number",min:7,max:90},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}}),e._v(" "),a("el-radio",{attrs:{id:"radio-dates-date",label:"date"},model:{value:e.radioDateType,callback:function(t){e.radioDateType=t},expression:"radioDateType"}},[e._v("Search by a date range")])],1),e._v(" "),a("label",{directives:[{name:"show",rawName:"v-show",value:"date"===e.radioDateType,expression:"radioDateType === 'date'"}],staticClass:"graph-control-label"},[a("span",{staticClass:"label-name"},[e._v("start date")]),e._v(" "),a("el-date-picker",{staticClass:"graph-start",attrs:{type:"date",placeholder:"Pick a start date"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),e._v(" "),a("label",{directives:[{name:"show",rawName:"v-show",value:"date"===e.radioDateType,expression:"radioDateType === 'date'"}],staticClass:"graph-control-label"},[a("span",{staticClass:"label-name"},[e._v("end date")]),e._v(" "),a("el-date-picker",{staticClass:"graph-end",attrs:{type:"date"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)])],1)],1),e._v(" "),e.error?a("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._v(" "),a("div",{staticClass:"condition-wrapper"},[e.latestCfs?a("div",{staticClass:"latest-cfs"},[a("div",{staticClass:"rate-group"},[a("span",{staticClass:"rate"},[e._v(e._s(e.latestCfs))]),e._v(" "),a("abbr",{staticClass:"rate-abbr",attrs:{title:"cubic feet per second"}},[e._v("CFS")])]),e._v(" "),e.mapUrl?a("a",{attrs:{href:e.mapUrl}},[e._v("Location of guage")]):e._e(),e._v(" "),a("div",{staticClass:"time-group"},[e.latestDate?a("span",[e._v(e._s(e.latestDate)+" at "+e._s(e.latestTime))]):e._e()])]):e._e(),e._v(" "),a("conditions",{attrs:{latestCfs:e.latestCfs}}),e._v(" "),e.latestCfs?e._e():a("intro",{attrs:{period:e.period}}),e._v(" "),a("history",{attrs:{latestCfs:e.latestCfs,siteName:e.siteName,latestTime:e.latestTime,latestDate:e.latestDate}})],1),e._v(" "),a("graph",{directives:[{name:"show",rawName:"v-show",value:e.selectedText,expression:"selectedText"}],attrs:{radioDateType:e.radioDateType,selected:e.selected,startDate:e.startDate,endDate:e.endDate,graphType:e.graphType,period:e.period}}),e._v(" "),a("photos",{directives:[{name:"show",rawName:"v-show",value:e.selectedText,expression:"selectedText"}],attrs:{siteName:e.selectedText}}),e._v(" "),a("footer",[e._v("\n    created by "),a("a",{attrs:{href:"//mountaindrawn.com"}},[e._v("mountaindrawn.com")]),e._v(" "),a("input",{staticClass:"color-picker",attrs:{type:"color",value:"#E0E4CC"},on:{change:e.selectBackground}}),e._v(" "),a("small",{staticClass:"color-value"},[e._v(e._s(e.backgroundColor))])])],1)},staticRenderFns:[]}},437:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"photos"},[a("div",{staticClass:"gallery"})])}]}},438:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("header",[e._m(0),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("h1",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),a("p",{staticClass:"tagline"},[e._v(e._s(e.tagline))])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"nav"},[a("router-link",{staticClass:"nav-item",attrs:{to:"/"}},[e._v("\n      Map\n    ")]),e._v(" "),a("router-link",{staticClass:"nav-item",attrs:{to:"/riverflow"}},[e._v("\n      Riverflow\n    ")])],1)}]}},439:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{id:"map"}})},staticRenderFns:[]}},440:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"intro"},[a("p",[e._v("Select a river to get the latest flow rate, a graph of flow history, and photos. Search by a period of days from today (default is "),a("span",{staticClass:"period"},[e._v(e._s(e.period))]),e._v(") or a date range.")])])},staticRenderFns:[]}},441:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.history.length>1,expression:"history.length > 1"}],staticClass:"history"},[a("h4",{staticClass:"history-title"},[e._v(e._s(e.title))]),e._v(" "),a("ul",{staticClass:"time-history"},e._l(e.history,function(t){return a("li",[a("b",[e._v(e._s(t.cfs))]),e._v(" "),a("abbr",{staticClass:"cfs",attrs:{title:"cubic feet per second"}},[e._v("cfs")]),e._v(" "),a("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),a("small",[e._v(e._s(t.date)+" at "+e._s(t.time))])])}))])},staticRenderFns:[]}},442:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:e.condition,expression:"condition"}],staticClass:"conditions"},[e._v("\n  "+e._s(e.condition)+"\n")])},staticRenderFns:[]}},445:function(e,t){e.exports={flow0:"Sorry but this river is bone dry. Try a spring fed river like the San Marcos til we get more rain.",flow1:"The river is pretty much just a trickle right. Not much good for floating at the moment but a good rain should bring it up",flow2:"It's barely moving but it should be floatable in kayaks or tubes. Be prepared to drag bottom in spots though.",flow3:"This is a pretty leisurely flow but still fun. You shouldn't have any problems scraping bottom in canoes at this level",flow4:"Now we're talking! The river is flowing pretty good but not too dangerous. If the graph shows a sharp increase over the past week it may still be rising.",flow5:"The flow is moving now! Unless this is a large volume river like the Colorado or Rio Grande you can expect some really fast moving water.",flow6:"DANGER! Possible death awaits! Unless this is a large volume river like the Colorado you may drown. Check with a local outfitter for more details on conditions before heading out."}},446:function(e,t){e.exports={data:[{text:"Select a river",value:"selectRiver"},{text:"-- Brazos River Basin --",value:""},{text:"Brazos River : Palo Pinto",value:"08089000"},{text:"Brazos River : Glen Rose",value:"08091000"},{text:"Brazos River : Waco",value:"08096500"},{text:"Brazos River : Bryan",value:"08108700"},{text:"Lampasas River : Kempner",value:"08103800"},{text:"Lampasas River : Ding Dong",value:"08103940"},{text:"Lampasas River : Belton",value:"08104100"},{text:"-- Colorado River Basin --",value:""},{text:"Barton Springs",value:"08155500"},{text:"Barton Creek : Above Barton Springs",value:"08155400"},{text:"Barton Creek : Loop 360",value:"08155300"},{text:"Barton Creek : Lost Ck Blvd",value:"08155240"},{text:"Barton Creek : SH 71",value:"08155200"},{text:"Colorado River : Austin",value:"08158000"},{text:"Colorado River : Bastrop",value:"08159200"},{text:"Onion Creek : Hwy 183",value:"08159000"},{text:"Llano River : Llano",value:"08151500"},{text:"Llano River : Mason",value:"08150700"},{text:"Llano River : Junction",value:"08150000"},{text:"San Saba River : Menard",value:"08144500"},{text:"San Saba River : San Saba",value:"08146000"},{text:"-- Guadalupe River Basin --",value:""},{text:"Guadalupe River : Spring Branch",value:"08167500"},{text:"Guadalupe River : Sattler",value:"08167800"},{text:"Comal River : New Braunfels",value:"08168500"},{text:"Guadalupe River : FM 1117 nr Seguin",value:"08169792"},{text:"Guadalupe River : Gonzales",value:"08173900"},{text:"San Marcos River : San Marcos",value:"08170500"},{text:"San Marcos River : Luling",value:"08172000"},{text:"Blanco River : Wimberley",value:"08171000"},{text:"Blanco River : Kyle",value:"08171300"},{text:"-- Nueces River Basin --",value:""},{text:"Nueces River : Laguna",value:"08190000"},{text:"Nueces River : Uvalde",value:"08192000"},{text:"Frio River : Concan",value:"08195000"},{text:"-- Rio Grande Basin --",value:""},{text:"Rio Grande : Castolon",value:"08374550"},{text:"Rio Grande : Big Bend",value:"08375300"},{text:"Pecos River : Pecos",value:"08419000"},{text:"Pecos River : Girvin",value:"08446500"},{text:"-- San Antonio River Basin --",value:""},{text:"Medina River : Patterson Road",value:"0817887350"},{text:"Medina River : Bandera",value:"08178880"},{text:"San Antonio River : Goliad",value:"08188500"}]}}},[179]);
//# sourceMappingURL=app.981b998f8171f53f8ea0.js.map